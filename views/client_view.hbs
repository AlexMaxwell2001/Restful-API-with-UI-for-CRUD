<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Clients Database</title>
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="/assets/css/all.css" rel="stylesheet" type="text/css"/>  
</head>
<body>
  <div class="container"> 
    <h2><a class="breadcrumb-item text-dark" href="/Clients">Clients Database</a> <span class="badge badge-secondary" id="databaseFilterNotice"></span></h2>
	<h2><a class="breadcrumb-item text-dark" href="/">Back to Database Options</a> <span class="badge badge-secondary" id="databaseFilterNotice"></span></h2>
    <div class="input-group mb-3">
        <div class="input-group-prepend">
            <label class="input-group-text" for="inputGroupSelect01"><i class="fa fa-search"></i></label>
            <select class="custom-select" id="fieldSearchSelect">
                <option value="1" selected>Title</option>
                <option value="2">First Name(s)</option>
				<option value="3">Surname</option>
				<option value="4">Mobile Phone Number</option>
				<option value="5">Home Phone Number</option>
				<option value="6">Email</option>
				<option value="7">Address Line 1</option>
				<option value="8">Address Line 2</option>
				<option value="9">Town</option>
				<option value="10">city/county</option>
				<option value="11">EIRCODE</option>
				<option value="12">Date of Birth</option>
				<option value="13">Guardian/Parent name if under 18</option>
				<option value="14">Message Permission</option>
				<option value="15">Date Created</option>
				<option value="16">Marital Status</option>
				<option value="17">Referred By</option>
            </select>
        </div>
        <input class="form-control py-2 border-left-0 border" type="search" placeholder="Filter Title List ..." id="tableFilter"> 
    </div>

    <table class="table table-hover table-striped" id="clientsList">
      <thead>
        <tr>  
          <th style="width: 25%">Title</th>
          <th style="width: 25%">First Name(s)</th>
		  <th style="width: 25%">Surname</th>
          <th style="width: 25%">Mobile Phone</th>
		  <th style="width: 25%">Home Phone</th>
          <th style="width: 25%">Email</th>
		  <th style="width: 25%">Address Line 1</th>
          <th style="width: 25%">Address Line 2</th>
		  <th style="width: 25%">Town</th>
          <th style="width: 25%">City/County</th>
		  <th style="width: 25%">EIRCODE</th>
		  <th style="width: 25%">DOB</th>
		  <th style="width: 25%">Guardian</th>
          <th style="width: 25%">Permission For Message(email,Mobile and home phone)</th>
          <th style="width: 25%">Date Created</th>
		  <th style="width: 25%">Marital Status</th>
          <th style="width: 25%">Referred By</th>
          <th class="text-center" style="width: 15%">Options</th>
        </tr>
      </thead>
      <tbody>
        {{#each results}}
        <tr >
          <td style="width: 25%">{{Title}}</td>
          <td style="width: 25%">{{FirstNames}}</td>
		  <td style="width: 25%">{{Surname}}</td>
          <td style="width: 25%">{{MobilePhone}}</td>
		  <td style="width: 25%">{{HomePhone}}</td>
          <td style="width: 25%">{{Email}}</td>
		  <td style="width: 25%">{{AddressHome.AddressLine1}}</td>
		  <td style="width: 25%">{{AddressHome.AddressLine2}}</td>
          <td style="width: 25%">{{AddressHome.Town}}</td>
		  <td style="width: 25%">{{AddressHome.countyORcity}}</td>
          <td style="width: 25%">{{AddressHome.EIRCODE}}</td>
		  <td style="width: 25%">{{AddPerDets.DOB}}</td>
		  <td style="width: 25%">{{AddPerDets.GuardianIfUnder18}}</td>
		  <td style="width: 25%">{{AddPerDets.PermissionForMessage}}</td>
		  <td style="width: 25%">{{AddPerDets.DateCreated}}</td>
		  <td style="width: 25%">{{AddPerDets.MaritalStatus}}</td>
		  <td style="width: 25%">{{AddPerDets.ReferredBy}}</td>
          <td class="text-right" style="width: 15%">
            <a href="javascript:void(0);" class="btn btn-sm btn-info update" data-id="{{ _id}}" data-title="{{ Title }}" data-first="{{ FirstNames }}" data-surname="{{ Surname }}" data-mobile="{{ MobilePhone }}" data-home="{{ HomePhone }}" data-email="{{ Email }}" data-ad1="{{ AddressHome.AddressLine1}}" data-ad2="{{ AddressHome.AddressLine2}}" data-town="{{ AddressHome.Town}}" data-cc="{{ AddressHome.cityORcounty}}" data-e="{{ AddressHome.EIRCODE}}" data-dob="{{ AddPerDets.DOB }}" data-g="{{ AddPerDets.GuardianIfUnder18 }}" data-per="{{ AddPerDets.PermissionForMessage }}" data-dc="{{ AddPerDets.DateCreated }}" data-ms="{{ AddPerDets.MaritalStatus }}" data-rb="{{ AddPerDets.ReferredBy}}">Update</a>
            <a href="javascript:void(0);" class="btn btn-sm btn-danger delete" data-id="{{ _id }}" data-title="{{ Title }}"  data-first="{{ FirstNames }}" data-surname="{{ Surname }}" data-mobile="{{ MobilePhone }}" data-home="{{ HomePhone }}" data-email="{{ Email }}" data-ad1="{{ AddressHome.AddressLine1}}" data-ad2="{{ AddressHome.AddressLine2}}" data-town="{{ AddressHome.Town}}" data-cc="{{ AddressHome.cityORcounty}}" data-e="{{ AddressHome.EIRCODE}}"data-dob="{{ AddPerDets.DOB }}" data-g="{{ AddPerDets.GuardianIfUnder18 }}" data-per="{{ AddPerDets.PermissionForMessage }}" data-dc="{{ AddPerDets.DateCreated }}" data-ms="{{ AddPerDets.MaritalStatus }}" data-rb="{{ AddPerDets.ReferredBy}}">Delete</a>
          </td>
        </tr>
        {{/each}}
      </tbody>
    </table>

    <div class="input-group mb-3">
        <button class="btn btn-primary mr-5" data-toggle="modal" data-target="#addModal">Add</button>
        <div class="input-group-prepend">
             <select class="custom-select" id="databaseSearchSelect">
                <option value="Title" selected>Title</option>
                <option value="FirstNames">First Name(s)</option>
				<option value="Surname">Surname</option>
				<option value="MobilePhone">Mobile Phone</option>
				<option value="HomePhone">Home Phone</option>
				<option value="Email">Email</option>
				<option value="AddressHome.AddressLine1">Address Line 1</option>
                <option value="AddressHome.AddressLine2">Address Line 2</option>
				<option value="AddressHome.Town">Town</option>
				<option value="AddressHome.cityORcounty">City/County</option>
				<option value="AddressHome.EIRCODE">EIRCODE</option>
				<option value="AddPerDets.DOB">Date of Birth</option>
				<option value="AddPerDets.GuardianIfUnder18">Guardian if under 18</option>
				<option value="AddPerDets.PermissionForMessage">Permission For Message</option>
				<option value="AddPerDets.DateCreated">Date Created</option>
				<option value="AddPerDets.MaritalStatus">Marital Status</option>
				<option value="AddPerDets.ReferredBy">Referred By</option>
            </select>
        </div>
        <input class="form-control py-2 border-left-0 border" type="search" placeholder="Find in Database ..." id="databaseSearchFilter"> 
        <div class="input-group-append">
            <button class="btn btn-success" type="button" id="databaseSearch">Find</button>
        </div>
    </div>

    <form id="addForm" action="/Clients" method="POST">
        <div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
         <div class="modal-dialog" role="document">
           <div class="modal-content">
             <div class="modal-header">
               <h5 class="modal-title" id="exampleModalLabel">Add New Client</h5>
               <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                 <span aria-hidden="true">&times;</span>
               </button>
             </div>
             <div class="modal-body">
               <div class="form-group">
                   <input type="text" name="Title" class="form-control" placeholder="Title" required>
               </div>
               <div class="form-group">
                   <input type="text" name="FirstNames" class="form-control" placeholder="First Name(s)" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="Surname" class="form-control" placeholder="Surname" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="MobilePhone" class="form-control" placeholder="Mobile Phone" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="HomePhone" class="form-control" placeholder="Home Phone" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="Email" class="form-control" placeholder="Email" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="AddressLine1" class="form-control" placeholder="Address Line 1" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="AddressLine2" class="form-control" placeholder="Address Line 2" >
               </div>
			   <div class="form-group">
                   <input type="text" name="Town" class="form-control" placeholder="Town" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="countyORcity" class="form-control" placeholder="city/county" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="EIRCODE" class="form-control" placeholder="EIRCODE" >
               </div>
			   <div class="form-group">
                   <input type="text" name="DOB" class="form-control" placeholder="Date of Birth" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="GuardianIfUnder18" class="form-control" placeholder="Guardian's name If Under 18" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="PermissionForMessage" class="form-control" placeholder="Permission For a Phone Message" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="DateCreated" class="form-control" placeholder="Date Created" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="MaritalStatus" class="form-control" placeholder="Marital Status" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="ReferredBy" class="form-control" placeholder="Referred by" >
               </div>
             </div>
             <div class="modal-footer">
               <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
               <button type="submit" class="btn btn-primary">Save</button>
             </div>
           </div>
         </div>
        </div>
    </form>

    <form id="updateForm" action="/Clients" method="PUT"> 
       <div class="modal fade" id="updateModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Update Client</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div class="form-group">
                   <input type="text" name="Title" class="form-control" placeholder="Title" required>
               </div>
               <div class="form-group">
                   <input type="text" name="FirstNames" class="form-control" placeholder="First Name(s)" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="Surname" class="form-control" placeholder="Surname" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="MobilePhone" class="form-control" placeholder="Mobile Phone" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="HomePhone" class="form-control" placeholder="Home Phone" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="Email" class="form-control" placeholder="Email" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="AddressLine1" class="form-control" placeholder="Address Line 1" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="AddressLine2" class="form-control" placeholder="Address Line 2" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="Town" class="form-control" placeholder="Town" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="countyORcity" class="form-control" placeholder="city/county" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="EIRCODE" class="form-control" placeholder="EIRCODE" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="DOB" class="form-control" placeholder="Date of Birth" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="GuardianIfUnder18" class="form-control" placeholder="Guardian's name If Under 18" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="PermissionForMessage" class="form-control" placeholder="Permission For a Phone Message" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="DateCreated" class="form-control" placeholder="Date Created" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="MaritalStatus" class="form-control" placeholder="Marital Status" required>
               </div>
			   <div class="form-group">
                   <input type="text" name="ReferredBy" class="form-control" placeholder="Reffered by" required>
               </div>
            </div>
            <div class="modal-footer">
              <input type="hidden" name="clientId" class="id">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="submit" class="btn btn-primary">Update</button>
            </div>
          </div>
        </div>
       </div>
    </form>

    <form id="deleteForm" action="/Clients" method="DELETE"> 
        <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
               <div class="modal-content">
                   <div class="modal-header">
                        <h5 class="modal-title" id="myModalLabel">Delete Client</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                   </div>
                   <div class="modal-body">
                        <strong>Are you sure you want to delete this Client?</strong>
                   </div>
                   <div class="modal-footer">
                        <input type="hidden" name="clientId" class="form-control id" required>
                        <button type="submit" class="btn btn-success">Delete</button>
                   </div>
                </div>
            </div>
        </div>
    </form>

    <div class="modal fade" id="successAlert" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="alert alert-success" role="alert">
                <strong>Oh Great!</strong> RESTful Operation was Successful!
            </div>
        </div>
    </div>

    <div class="modal fade" id="errorAlert" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="alert alert-danger" role="alert">
                <strong>Oh No!</strong> RESTful Operation was Unsuccessful!
            </div>
        </div>
    </div>
 </div>
 
<script src="/assets/js/jquery-3.5.0.min.js"></script>
<script src="/assets/js/bootstrap.bundle.min.js"></script>
<script>
    $(document).ready(function(){
       
        var addForm = $("#addForm");
        addForm.submit(function(e){
            e.preventDefault(); 
            $.ajax({
                type: addForm.attr('method'),
                url:  addForm.attr('action'),
                data: addForm.serialize(), 
                success: function (data) {
                    console.log('Update successful!');
                    $('#successAlert').modal('show');
                    var timer = setTimeout(function() {
                        $(location).attr('href', '/')
                    }, 3000);
                },
                error: function (data) {
                    console.log('An error occurred.');
                    $('#errorAlert').modal('show');
                    var timer = setTimeout(function() {
                        $(location).attr('href', '/')
                    }, 3000);
                },
            });
            $('#addModal').modal('hide');
        });
        //Update Functionality
        $('#clientsList').on('click','.update',function(){
            var client_id = $(this).data('id');
            var client_title = $(this).data('title');
            var client_first = $(this).data('first');
			var client_surname = $(this).data('surname');
            var client_mobile = $(this).data('mobile');
			var client_home = $(this).data('home');
            var client_email = $(this).data('email');
			var client_addressline1=$(this).data('ad1');
			var client_addressline2 = $(this).data('ad2');
			var client_town= $(this).data('town');
			var client_cc = $(this).data('cc');
			var client_e = $(this).data('e');
			var client_dob =$(this).data('dob');
			var client_g =$(this).data('g');
			var client_per =$(this).data('per');
			var client_dc =$(this).data('dc');
			var client_ms =$(this).data('ms');
			var client_rb =$(this).data('rb');
            $('#updateModal').modal('show');
            $('.Title').val(client_title);
            $('.FirstNames').val(client_first);
			$('.Surname').val(client_surname);
            $('.MobilePhone').val(client_mobile);
			$('.HomePhone').val(client_home);
            $('.Email').val(client_email);
			$('.AddressHome.AddressLine1').val(client_addressline1);
			$('.AddressHome.AddressLine2').val(client_addressline2);
			$('.AddressHome.Town').val(client_town);
			$('.AddressHome.countyORcity').val(client_cc);
			$('.AddressHome.EIRCODE').val(client_e);
			$('.AddPerDets.DOB').val(client_dob);
			$('.AddPerDets.GuardianIfUnder18').val(client_g);
			$('.AddPerDets.PermissionForMessage').val(client_per);
			$('.AddPerDets.DateCreated').val(client_dc);
			$('.AddPerDets.MaritalStatus').val(client_ms);
			$('.AddPerDets.ReferredBy').val(client_rb);
            $('.id').val(client_id);
        });
		
        var updateForm = $("#updateForm");
        updateForm.submit(function(e){
            e.preventDefault(); 
            var id = updateForm.find('input[name="clientId"]').val();    
            $.ajax({
                type: updateForm.attr('method'),
                url:  updateForm.attr('action')+"/"+id,
                data: updateForm.serialize(), 
                success: function (data) {
                    console.log('Update successful!');
                    $('#successAlert').modal('show');
                    var timer = setTimeout(function() {
                        $(location).attr('href', '/Clients')
                    }, 3000);
                },
                error: function (data) {
                    console.log('An error occurred.');
                    $('#errorAlert').modal('show');
                    var timer = setTimeout(function() {
                        $(location).attr('href', '/Clients')
                    }, 3000);
                },
            });
            $('#updateModal').modal('hide');
        });
		
		//Delete functionality
        $('#clientsList').on('click','.delete',function(){
            var client_id = $(this).data('id');
            var client_first = $(this).data('first');
            $("#deleteModal .modal-body").html("<span class=\"font-weight-bold\">Are you sure you want to delete Client: </span><span class=\"font-italic\">"+client_id+"... ("+client_first+")</span><span class=\"font-weight-bold\">?</span>");
            $('#deleteModal').modal('show');
            $('.id').val(client_id);
        });
		
        var deleteForm = $("#deleteForm");
        deleteForm.submit(function(e){
            e.preventDefault(); 
            var id = deleteForm.find('input[name="clientId"]').val();   
            $.ajax({
                type: deleteForm.attr('method'),
                url:  deleteForm.attr('action')+"/"+id,
                success: function (data) {
                    console.log('Deletion successful!');
                    $('#successAlert').modal('show');
                    var timer = setTimeout(function() {
                        $(location).attr('href', '/Clients')
                    }, 3000);
                },
                error: function (data) {
                    console.log('An error occurred.');
                    $('#errorAlert').modal('show');
                    var timer = setTimeout(function() {
                        $(location).attr('href', '/Clients')
                    }, 3000);
                },
            });
            $('#deleteModal').modal('hide');
        });

		//Depending on the pre set value of the options we show different views
        $("#fieldSearchSelect").on('change',function() {
            var k = $(this).val();
            if (k == 1) {
                $("#tableFilter").attr("placeholder", "Filter Title List ...");
            } 
			else if(k==2)
			{
                $("#tableFilter").attr("placeholder", "Filter First Name(s) List ...");
            }
			else if(k==3)
			{
				$("#tableFilter").attr("placeholder", "Filter Surname List ...");
			}
			else if(k==4)
			{
				$("#tableFilter").attr("placeholder", "Filter Mobile Phone Number List ...");
			}
			else if(k==5)
			{
				$("#tableFilter").attr("placeholder", "Filter Home Phone Number List ...");
            }
			else if(k==6)
			{
				$("#tableFilter").attr("placeholder", "Filter Email List ...");
			}
			else if(k==7)
			{
				$("#tableFilter").attr("placeholder", "Filter AdressLine 1 List ...");
			}
			else if(k==8)
			{
				$("#tableFilter").attr("placeholder", "Filter Address Line 2 List ...");
			}
			else if(k==9)
			{
				$("#tableFilter").attr("placeholder", "Filter Town List ...");
			}
			else if(k==10)
			{
				$("#tableFilter").attr("placeholder", "Filter City/County List ...");
			}
			else if(k==11)
			{
				$("#tableFilter").attr("placeholder", "Filter EIRCODE List ...");
			}
			else if(k==12)
			{
				$("#tableFilter").attr("placeholder", "Filter Date of Birth List ...");
			}
			else if(k==13)
			{
				$("#tableFilter").attr("placeholder", "Filter Guardian/Parent name if under 18 List ...");
			}
			else if(k==14)
			{
				$("#tableFilter").attr("placeholder", "Filter Permission for message List ...");
			}
			else if(k==15)
			{
				$("#tableFilter").attr("placeholder", "Filter Date Created List ...");
			}
			else if(k==16)
			{
				$("#tableFilter").attr("placeholder", "Filter Marital Status List ...");
			}
			else{
				$("#tableFilter").attr("placeholder", "Filter Referred By List ...");
			}
            $("#tableFilter").keyup();
        });

		//This controls the table data cell which we test
        $("#tableFilter").keyup(function(){
            var filter = $(this).val().toUpperCase(); 
            $("#clientsList").find('tr').each(function(rows) {
                if (rows !==  0) {
                    var row = $(this);
                    var searching = "";
                    if ($("#fieldSearchSelect").val() == 1) {
                        searching = row.find("td:first").text().toUpperCase();
                    }  
					else if($("#fieldSearchSelect").val() == 2)
					{
                        searching = row.find("td:first + td").text().toUpperCase();
                    }
					else if($("#fieldSearchSelect").val() == 3)
					{
						searching = row.find("td:first + td + td").text().toUpperCase();
					}
					else if($("#fieldSearchSelect").val() == 4)
					{
						searching = row.find("td:first + td + td + td").text().toUpperCase();
					}
					else if($("#fieldSearchSelect").val() == 5)
					{
						searching = row.find("td:first + td + td +td +td").text().toUpperCase();
					}
					else if($("#fieldSearchSelect").val() == 6)
					{
						searching = row.find("td:first + td + td + td +td +td").text().toUpperCase();
					}
					else if($("#fieldSearchSelect").val() == 7)
					{
						searching = row.find("td:first + td + td + td +td +td + td").text().toUpperCase();
					}
					else if($("#fieldSearchSelect").val() == 8)
					{
						searching = row.find("td:first + td + td + td +td +td +td +td").text().toUpperCase();
					}
					else if($("#fieldSearchSelect").val() == 9)
					{
						searching = row.find("td:first + td + td + td +td +td +td+ td +td").text().toUpperCase();
					}
					else if($("#fieldSearchSelect").val() == 10)
					{
						searching = row.find("td:first + td + td + td +td +td +td + td + td + td").text().toUpperCase();
					}
					else if($("#fieldSearchSelect").val() == 11)
					{
						searching = row.find("td:first + td + td + td +td +td +td + td + td + td +td").text().toUpperCase();
					}
					else if($("#fieldSearchSelect").val() == 12)
					{
						searching = row.find("td:first + td + td + td +td +td +td + td + td + td +td +td").text().toUpperCase();
					}
					else if($("#fieldSearchSelect").val() == 13)
					{
						searching = row.find("td:first + td + td + td +td +td +td + td + td + td + td + td + td").text().toUpperCase();
					}
					else if($("#fieldSearchSelect").val() == 14)
					{
						searching = row.find("td:first + td + td + td +td +td +td + td + td + td + td + td + td + td").text().toUpperCase();
					}
					else if($("#fieldSearchSelect").val() == 15)
					{
						searching = row.find("td:first + td + td + td +td +td +td + td + td + td + td + td + td + td + td").text().toUpperCase();
					}
					else if($("#fieldSearchSelect").val() == 16)
					{
						searching = row.find("td:first + td + td + td +td +td +td + td + td + td + td + td + td +td + td +td").text().toUpperCase();
					}
					else 
					{
						searching = row.find("td:first + td + td + td +td +td +td + td + td + td + td + td + td +td +td +td +td").text().toUpperCase();
					}
                    if (searching.indexOf(filter) != -1) {               
                        row.show();
                    } else {
                        row.hide();
                    }
                }
            });
        });
		
        $("#databaseSearch").on('click',function() {
            var search = $("#databaseSearchFilter").val().replace(/[|&;$%@"<>()+,^  ]/g, "");
            if (search) {
                $(location).attr('href', '/Clients/'+$("#databaseSearchSelect").val()+'/'+search);
            } else {
                $(location).attr('href', '/Clients');
            }
        });
		
        if ($(location).attr('pathname') !== '/Clients') {
           $('#databaseFilterNotice').text("("+$(location).attr('pathname')+")");
        }
    });
</script>
</body>
</html>
